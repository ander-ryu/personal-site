<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <title>网站数据展示</title>
    <style>
        body {
            font-family: "Microsoft YaHei", sans-serif;
            padding: 20px;
        }

        .item {
            border-bottom: 1px solid #ccc;
            margin-bottom: 20px;
            padding-bottom: 10px;
        }

        h2 {
            color: #333;
        }

        p {
            color: #555;
        }
    </style>
</head>

<body>
    <h1>网站内容</h1>
    <div id="content">加载中...</div>

    <script>
        fetch("/api/data")
            .then(res => res.json())
            .then(result => {
                console.log("API返回:", result);

                if (result.ok && result.data.length > 0) {
                    // 循环生成所有记录
                    let html = "";
                    result.data.forEach(item => {
                        const title = item.content?.title || "无标题";
                        const body = item.content?.body || "无内容";
                        const time = new Date(item.created_at).toLocaleString("zh-CN");

                        html += `
              <div class="item">
                <h2>${title}</h2>
                <p>${body}</p>
                <small>创建时间：${time}</small>
              </div>
            `;
                    });

                    document.getElementById("content").innerHTML = html;
                } else {
                    document.getElementById("content").innerHTML = "暂无数据";
                }
            })
            .catch(err => {
                document.getElementById("content").innerText = "加载失败：" + err;
            });
    </script>

</body>

</html>